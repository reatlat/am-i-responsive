"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function showLoading(){$(".loading-container").remove(),$('<div id="orrsLoader" class="loading-container"><div><div class="mdl-spinner mdl-js-spinner is-active"></div></div></div>').appendTo("body"),componentHandler.upgradeElements($(".mdl-spinner").get()),setTimeout(function(){$("#orrsLoader").css({opacity:1})},1)}function hideLoading(){$("#orrsLoader").css({opacity:0}),setTimeout(function(){$("#orrsLoader").remove()},400)}function showDialog(e){(e=$.extend({id:"orrsDiag",title:null,text:null,neutral:!1,negative:!1,positive:!1,cancelable:!0,contentStyle:null,onLoaded:!1,onHidden:!1,hideOther:!0},e)).hideOther&&($(".dialog-container").remove(),$(document).unbind("keyup.dialog")),$('<div id="'+e.id+'" class="dialog-container"><div class="mdl-card mdl-shadow--16dp" id="'+e.id+'_content"></div></div>').appendTo("body");var t=$("#"+e.id),i=t.find(".mdl-card");if(null!=e.contentStyle&&i.css(e.contentStyle),null!=e.title&&$("<h5>"+e.title+"</h5>").appendTo(i),null!=e.text&&$("<p>"+e.text+"</p>").appendTo(i),e.neutral||e.negative||e.positive){var n=$('<div class="mdl-card__actions dialog-button-bar"></div>');if(e.neutral){e.neutral=$.extend({id:"neutral",title:"Neutral",onClick:null},e.neutral);var o=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+e.neutral.id+'">'+e.neutral.title+"</button>");o.click(function(i){i.preventDefault(),null!=e.neutral.onClick&&e.neutral.onClick(i)||hideDialog(t,e.onHidden)}),o.appendTo(n)}if(e.negative){e.negative=$.extend({id:"negative",title:"Cancel",onClick:null},e.negative);var a=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+e.negative.id+'">'+e.negative.title+"</button>");a.click(function(i){i.preventDefault(),null!=e.negative.onClick&&e.negative.onClick(i)||hideDialog(t,e.onHidden)}),a.appendTo(n)}if(e.positive){e.positive=$.extend({id:"positive",title:"OK",onClick:null},e.positive);var l=$('<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="'+e.positive.id+'">'+e.positive.title+"</button>");l.click(function(i){i.preventDefault(),null!=e.positive.onClick&&e.positive.onClick(i)||hideDialog(t,e.onHidden)}),l.appendTo(n)}n.appendTo(i)}componentHandler.upgradeDom(),e.cancelable&&(t.click(function(){hideDialog(t,e.onHidden)}),$(document).bind("keyup.dialog",function(i){27==i.which&&hideDialog(t,e.onHidden)}),i.click(function(i){i.stopPropagation()})),setTimeout(function(){t.css({opacity:1}),e.onLoaded&&e.onLoaded()},1)}function hideDialog(i,e){$(document).unbind("keyup.dialog"),i.css({opacity:0}),setTimeout(function(){i.remove(),e&&e()},400)}var _createClass=function(){function n(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(i,e,t){return e&&n(i.prototype,e),t&&n(i,t),i}}();$.fn.extend({donetyping:function(e,n){n=n||1e3;var o,a=function(i){o&&(o=null,e.call(i))};return this.each(function(i,e){var t=$(e);t.is(":input")&&t.on("keyup keypress paste",function(i){"keyup"==i.type&&8!=i.keyCode||(o&&clearTimeout(o),o=setTimeout(function(){a(e)},n))}).on("blur",function(){a(e)})})}}),function(o){var i=function(){function n(i){var e=i.debug,t=void 0!==e&&e;_classCallCheck(this,n),this.debug=t}return _createClass(n,[{key:"_init",value:function(){this._debugLog("_init() =>",this),this._initTriggers(),this._initDraggable(),this._EuAccCookies()}},{key:"_debugLog",value:function(){if(this.debug){for(var i,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(i=console).log.apply(i,["ðŸ¦„ AMI:"].concat(t))}}},{key:"_initTriggers",value:function(){if(this._debugLog("_initTriggers()"),o("#ami-share-buttons").on("click",function(i){o(".addthis_toolbox_wrapper").toggleClass("active")}),o("#domain").donetyping(function(){window.AMI._debugLog("donetiping");var i=window.AMI._checkUrl(o("#domain").val());window.history.pushState(null,null,location.origin+"/?url="+i),window.addthis_share.url=window.location.href,window.addthis_share.title=window.document.title+" - "+i,window.addthis.toolbox(".addthis_toolbox"),o("#screenshot-wrapper iframe").attr("src",i)},1e3),this._GET("url")){window.AMI._debugLog("Use URL params");var i=window.AMI._checkUrl(this._GET("url"));o("#domain-input-wrapper").addClass("is-dirty"),o("#domain").val(i),o("#screenshot-wrapper iframe").attr("src",i)}o(".mdl-js-popup").on("click",function(i){i.preventDefault();var e=o(i.target).attr("data-mdl-popup-action");window.AMI._debugLog("Popup target",e),window.AMI._openPopup(e)})}},{key:"_openPopup",value:function(i){switch(i){case"tos":showDialog({title:window.ami_config.tos.title,text:window.ami_config.tos.content});break;case"gdpr":showDialog({title:window.ami_config.gdpr.title,text:window.ami_config.gdpr.content,onHidden:function(i){window.AMI._EuAccCookies()}});break;case"mit":showDialog({title:window.ami_config.mit.title,text:window.ami_config.mit.content});break;case"cookies":showDialog({title:window.ami_config.cookies.title,text:window.ami_config.cookies.content,cancelable:!1,negative:{title:window.ami_config.cookies.negative_title,onClick:function(i){window.AMI._openPopup("gdpr")}},positive:{title:window.ami_config.cookies.positive_title,onClick:function(i){window.AMI._debugLog("EuAccCookies accepted"),Cookies.set("EuAccCookies","1",{expires:30,path:"/"})}}})}}},{key:"_isEurope",value:function(){var i=new XMLHttpRequest;i.open("GET",document.location,!1),i.send(null);var e=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HU","HR","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"].includes(i.getResponseHeader("x-country"));return window.AMI._debugLog("_isEurope()",e),e}},{key:"_EuAccCookies",value:function(){!Cookies.get("EuAccCookies")&&this._isEurope()&&this._openPopup("cookies")}},{key:"_checkUrl",value:function(i){return i.match(/^[a-zA-Z]+:\/\//)||""===i||(i="http://"+i,o("#domain").val(i)),i}},{key:"_initDraggable",value:function(){var t=3;o(".desktop,.laptop,.tablet,.mobile").draggable({start:function(i,e){o(this).css("z-index",t++)}}),o(".display div").click(function(){o(this).addClass("top").removeClass("bottom"),o(this).siblings().removeClass("top").addClass("bottom"),o(this).css("z-index",t++)})}},{key:"_GET",value:function(i,e){e=e||window.location.href,this._debugLog("_GET() => ",i,e);var n={};return e.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(i,e,t){n[e]=void 0!==t?t:""}),i?n[i]?n[i]:null:n}}]),n}();window.AMI=new i({debug:!1}),window.AMI._init()}(jQuery);
//# sourceMappingURL=scripts.min.js.map