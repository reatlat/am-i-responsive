"use strict";function _classCallCheck(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function showLoading(){$(".loading-container").remove(),$('<div id="orrsLoader" class="loading-container"><div><div class="mdl-spinner mdl-js-spinner is-active"></div></div></div>').appendTo("body"),componentHandler.upgradeElements($(".mdl-spinner").get()),setTimeout(function(){$("#orrsLoader").css({opacity:1})},1)}function hideLoading(){$("#orrsLoader").css({opacity:0}),setTimeout(function(){$("#orrsLoader").remove()},400)}function showDialog(n){(n=$.extend({id:"orrsDiag",title:null,text:null,neutral:!1,negative:!1,positive:!1,cancelable:!0,contentStyle:null,onLoaded:!1,onHidden:!1,hideOther:!0},n)).hideOther&&($(".dialog-container").remove(),$(document).unbind("keyup.dialog")),$('<div id="'+n.id+'" class="dialog-container"><div class="mdl-card mdl-shadow--16dp" id="'+n.id+'_content"></div></div>').appendTo("body");var t=$("#"+n.id),i=t.find(".mdl-card");if(null!=n.contentStyle&&i.css(n.contentStyle),null!=n.title&&$("<h5>"+n.title+"</h5>").appendTo(i),null!=n.text&&$("<p>"+n.text+"</p>").appendTo(i),n.neutral||n.negative||n.positive){var e=$('<div class="mdl-card__actions dialog-button-bar"></div>');if(n.neutral){n.neutral=$.extend({id:"neutral",title:"Neutral",onClick:null},n.neutral);var o=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+n.neutral.id+'">'+n.neutral.title+"</button>");o.click(function(i){i.preventDefault(),null!=n.neutral.onClick&&n.neutral.onClick(i)||hideDialog(t,n.onHidden)}),o.appendTo(e)}if(n.negative){n.negative=$.extend({id:"negative",title:"Cancel",onClick:null},n.negative);var a=$('<button class="mdl-button mdl-js-button mdl-js-ripple-effect" id="'+n.negative.id+'">'+n.negative.title+"</button>");a.click(function(i){i.preventDefault(),null!=n.negative.onClick&&n.negative.onClick(i)||hideDialog(t,n.onHidden)}),a.appendTo(e)}if(n.positive){n.positive=$.extend({id:"positive",title:"OK",onClick:null},n.positive);var l=$('<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" id="'+n.positive.id+'">'+n.positive.title+"</button>");l.click(function(i){i.preventDefault(),null!=n.positive.onClick&&n.positive.onClick(i)||hideDialog(t,n.onHidden)}),l.appendTo(e)}e.appendTo(i)}componentHandler.upgradeDom(),n.cancelable&&(t.click(function(){hideDialog(t,n.onHidden)}),$(document).bind("keyup.dialog",function(i){27==i.which&&hideDialog(t,n.onHidden)}),i.click(function(i){i.stopPropagation()})),setTimeout(function(){t.css({opacity:1}),n.onLoaded&&n.onLoaded()},1)}function hideDialog(i,n){$(document).unbind("keyup.dialog"),i.css({opacity:0}),setTimeout(function(){i.remove(),n&&n()},400)}var _createClass=function(){function e(i,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(i,n,t){return n&&e(i.prototype,n),t&&e(i,t),i}}();$.fn.extend({donetyping:function(n,e){e=e||1e3;var o,a=function(i){o&&(o=null,n.call(i))};return this.each(function(i,n){var t=$(n);t.is(":input")&&t.on("keyup keypress paste",function(i){"keyup"==i.type&&8!=i.keyCode||(o&&clearTimeout(o),o=setTimeout(function(){a(n)},e))}).on("blur",function(){a(n)})})}}),function(o){var i=function(){function e(i){var n=i.debug,t=void 0!==n&&n;_classCallCheck(this,e),this.debug=t}return _createClass(e,[{key:"_init",value:function(){this._debugLog("_init() =>",this),this._initTriggers(),this._initDraggable()}},{key:"_debugLog",value:function(){if(this.debug){for(var i,n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];(i=console).log.apply(i,["ðŸ¦„ AMI:"].concat(t))}}},{key:"_initTriggers",value:function(){if(this._debugLog("_initTriggers()"),o("#ami-share-buttons").on("click",function(i){o(".addthis_toolbox_wrapper").toggleClass("active")}),o("#domain").donetyping(function(){window.AMI._debugLog("donetiping");var i=window.AMI._checkUrl(o("#domain").val());window.history.pushState(null,null,location.origin+"/?url="+i),window.addthis_share.url=window.location.href,window.addthis_share.title=window.document.title+" - "+i,window.addthis.toolbox(".addthis_toolbox"),o("iframe").attr("src",i)},1e3),this._GET("url")){window.AMI._debugLog("Use URL params");var i=window.AMI._checkUrl(this._GET("url"));o("#domain-input-wrapper").addClass("is-dirty"),o("#domain").val(i),o("iframe").attr("src",i)}o("#show-info").click(function(){showDialog({title:window.ami_config.information.title,text:window.ami_config.information.content})}),o("#show-action").click(function(){showDialog({title:window.ami_config.action.title,text:window.ami_config.action.content,positive:{title:window.ami_config.action.positive_title,onClick:function(i){alert("Action performed!")}}})})}},{key:"_checkUrl",value:function(i){return i.match(/^[a-zA-Z]+:\/\//)||(i="http://"+i,o("#domain").val(i)),i}},{key:"_initDraggable",value:function(){var t=3;o(".desktop,.laptop,.tablet,.mobile").draggable({start:function(i,n){o(this).css("z-index",t++)}}),o(".display div").click(function(){o(this).addClass("top").removeClass("bottom"),o(this).siblings().removeClass("top").addClass("bottom"),o(this).css("z-index",t++)})}},{key:"_GET",value:function(i,n){n=n||window.location.href,this._debugLog("_GET() => ",i,n);var e={};return n.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(i,n,t){e[n]=void 0!==t?t:""}),i?e[i]?e[i]:null:e}}]),e}();window.AMI=new i({debug:!0}),window.AMI._init()}(jQuery);
//# sourceMappingURL=scripts.min.js.map